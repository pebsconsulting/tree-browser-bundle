!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(27),o=r(i),a=n(30);o.default.fn.cmfTree=function(e){e=o.default.extend({adapter:null,request:{load:null},actions:{}},e);var t=(0,o.default)(this),n=function(e){if("string"==typeof e)return(0,o.default)(e);if(e instanceof o.default)return e;throw"Cannot handle selector "+e+". You may want to pass a jQuery object or a jQuery selector."};if(!e.request.load)throw"cmfTree needs an AJAX URL to lazy load the tree, pass it using the `request.load` option.";e.adapter||(e.adapter=new a.FancytreeAdapter(e));var r=e.adapter;if(!r.bindToElement)throw"cmfTree adapters must have a bindToElement() method to specify the output element of the tree.";for(var i in e.actions)if(e.actions.hasOwnProperty(i)){if(!r.addAction)throw"The configured cmfTree adapter does not support actions, implement the addAction() method or use another adapter.";var s=e.actions[i];if(!s.url)throw'actions should have a url defined, "'+i+'" does not.';r.addAction(i,s.url,s.icon)}if(r.bindToElement(t),e.path_output){if(!r.bindToInput)throw"The configured cmfTree adapter does not support binding to an input field, implement the bindToInput() method or use another adapter.";r.bindToInput(n(e.path_output))}return r}},function(e,t,n){var r=n(44)("wks"),i=n(15),o=n(2).Symbol;e.exports=function(e){return r[e]||(r[e]=o&&o[e]||(o||i)("Symbol."+e))}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(4),i=n(23);e.exports=n(10)?function(e,t,n){return r.setDesc(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t){e.exports={}},function(e,t,n){var r=n(2),i=n(3),o=n(15)("src"),a="toString",s=Function[a],l=(""+s).split(a);n(7).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,a){"function"==typeof n&&(n.hasOwnProperty(o)||i(n,o,e[t]?""+e[t]:l.join(String(t))),n.hasOwnProperty("name")||i(n,"name",t)),e===r?e[t]=n:(a||delete e[t],i(e,t,n))})(Function.prototype,a,function(){return"function"==typeof this&&this[o]||s.call(this)})},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(33);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){e.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r=n(42),i=n(19),o=n(6),a=n(3),s=n(11),l=n(5),d=n(40),c=n(14),u=n(4).getProto,h=n(1)("iterator"),f=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",v="values",y=function(){return this};e.exports=function(e,t,n,b,m,x,_){d(n,t,b);var k,N,w=function(e){if(!f&&e in T)return T[e];switch(e){case g:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",S=m==v,E=!1,T=e.prototype,P=T[h]||T[p]||m&&T[m],A=P||w(m);if(P){var F=u(A.call(new e));c(F,C,!0),!r&&s(T,p)&&a(F,h,y),S&&P.name!==v&&(E=!0,A=function(){return P.call(this)})}if(r&&!_||!f&&!E&&T[h]||a(T,h,A),l[t]=A,l[C]=y,m)if(k={values:S?A:w(v),keys:x?A:w(g),entries:S?w("entries"):A},_)for(N in k)N in T||o(T,N,k[N]);else i(i.P+i.F*(f||E),t,k);return k}},function(e,t,n){var r=n(4).setDesc,i=n(11),o=n(1)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(12);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(18),i=n(1)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=(t=Object(e))[i])?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(2),i=n(7),o=n(3),a=n(6),s=n(8),l="prototype",d=function(e,t,n){var c,u,h,f,p=e&d.F,g=e&d.G,v=e&d.S,y=e&d.P,b=e&d.B,m=g?r:v?r[t]||(r[t]={}):(r[t]||{})[l],x=g?i:i[t]||(i[t]={}),_=x[l]||(x[l]={});g&&(n=t);for(c in n)u=!p&&m&&c in m,h=(u?m:n)[c],f=b&&u?s(h,r):y&&"function"==typeof h?s(Function.call,h):h,m&&!u&&a(m,c,h),x[c]!=h&&o(x,c,f),y&&_[c]!=h&&(_[c]=h)};r.core=i,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,e.exports=d},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(8),i=n(39),o=n(38),a=n(16),s=n(47),l=n(48);e.exports=function(e,t,n,d){var c,u,h,f=l(e),p=r(n,d,t?2:1),g=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(o(f))for(c=s(e.length);c>g;g++)t?p(a(u=e[g])[0],u[1]):p(e[g]);else for(h=f.call(e);!(u=h.next()).done;)i(h,p,u.value,t)}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(6);e.exports=function(e,t){for(var n in t)r(e,n,t[n]);return e}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=jQuery},function(e,t){!function(e,t,n,r){"use strict";function i(e){return 0===e?"":e>0?"+"+e:""+e}function o(){s||(e.ui.plugin.add("draggable","connectToFancytree",{start:function(t,n){var r=e(this).data("ui-draggable")||e(this).data("draggable"),i=n.helper.data("ftSourceNode")||null;if(i)return r.offset.click.top=-2,r.offset.click.left=16,i.tree.ext.dnd._onDragEvent("start",i,null,t,n,r)},drag:function(t,n){var r,i,o,a=e(this).data("ui-draggable")||e(this).data("draggable"),s=n.helper.data("ftSourceNode")||null,l=n.helper.data("ftTargetNode")||null,d=e.ui.fancytree.getNode(t.target),c=s&&s.tree.options.dnd;return t.target&&!d&&(i=e(t.target).closest("div.fancytree-drag-helper,#fancytree-drop-marker").length>0)?(o=s||l||e.ui.fancytree,void o.debug("Drag event over helper: ignored.")):(n.helper.data("ftTargetNode",d),c&&c.updateHelper&&(r=s.tree._makeHookContext(s,t,{otherNode:d,ui:n,draggable:a,dropMarker:e("#fancytree-drop-marker")}),c.updateHelper.call(s.tree,s,r)),l&&l!==d&&l.tree.ext.dnd._onDragEvent("leave",l,s,t,n,a),void(d&&d.tree.options.dnd.dragDrop&&(d===l?d.tree.ext.dnd._onDragEvent("over",d,s,t,n,a):(d.tree.ext.dnd._onDragEvent("enter",d,s,t,n,a),d.tree.ext.dnd._onDragEvent("over",d,s,t,n,a)))))},stop:function(t,n){var r,i=e(this).data("ui-draggable")||e(this).data("draggable"),o=n.helper.data("ftSourceNode")||null,a=n.helper.data("ftTargetNode")||null,s="mouseup"===t.type&&1===t.which;s||(r=o||a||e.ui.fancytree,r.debug("Drag was cancelled")),a&&(s&&a.tree.ext.dnd._onDragEvent("drop",a,o,t,n,i),a.tree.ext.dnd._onDragEvent("leave",a,o,t,n,i)),o&&o.tree.ext.dnd._onDragEvent("stop",o,null,t,n,i)}}),s=!0)}function a(t){var n=t.options.dnd||null,r=t.options.glyph||null;n&&o(),n&&n.dragStart&&t.widget.element.draggable(e.extend({addClasses:!1,appendTo:t.$container,containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:!0,helper:function(t){var n,i,o,a=e.ui.fancytree.getNode(t.target);return a?(o=a.tree.options.dnd,i=e(a.span),n=e("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(i.find("span.fancytree-title").clone()),n.data("ftSourceNode",a),r&&n.find(".fancytree-drag-helper-img").addClass(r.map.dragHelper),o.initHelper&&o.initHelper.call(a.tree,a,{node:a,tree:a.tree,originalEvent:t,ui:{helper:n}}),n):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(e,t){var n=t.helper.data("ftSourceNode");return!!n}},t.options.dnd.draggable)),n&&n.dragDrop&&t.widget.element.droppable(e.extend({addClasses:!1,tolerance:"intersect",greedy:!1},t.options.dnd.droppable))}var s=!1,l="fancytree-drop-accept",d="fancytree-drop-after",c="fancytree-drop-before",u="fancytree-drop-over",h="fancytree-drop-reject",f="fancytree-drop-target";e.ui.fancytree.registerExtension({name:"dnd",version:"2.21.0",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(t){var n=t.tree;this._superApply(arguments),n.options.dnd.dragStart&&n.$container.on("mousedown",function(n){if(t.options.dnd.focusOnClick){var r=e.ui.fancytree.getNode(n);r&&r.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout(function(){e(n.target).closest(":tabbable").focus()},10)}}),a(n)},_setDndStatus:function(t,n,r,o,a){var s,p="center",g=this._local,v=this.options.glyph||null,y=t?e(t.span):null,b=e(n.span),m=b.find(">span.fancytree-title");if(g.$dropMarker||(g.$dropMarker=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo(e(this.$div).parent()),v&&g.$dropMarker.addClass(v.map.dropMarker)),"after"===o||"before"===o||"over"===o){switch(s=-24,o){case"before":p="top",s-=16;break;case"after":p="bottom",s-=16}g.$dropMarker.toggleClass(d,"after"===o).toggleClass(u,"over"===o).toggleClass(c,"before"===o).show().position(e.ui.fancytree.fixPositionOptions({my:"left"+i(s)+" center",at:"left "+p,of:m}))}else g.$dropMarker.hide();y&&y.toggleClass(l,a===!0).toggleClass(h,a===!1),b.toggleClass(f,"after"===o||"before"===o||"over"===o).toggleClass(d,"after"===o).toggleClass(c,"before"===o).toggleClass(l,a===!0).toggleClass(h,a===!1),r.toggleClass(l,a===!0).toggleClass(h,a===!1)},_onDragEvent:function(t,i,o,a,s,l){var d,c,u,h,f,p,g,v,y,b=this.options,m=b.dnd,x=this._makeHookContext(i,a,{otherNode:o,ui:s,draggable:l}),_=null,k=this,N=e(i.span);switch(m.smartRevert&&(l.options.revert="invalid"),t){case"start":i.isStatusNode()?_=!1:m.dragStart&&(_=m.dragStart(i,x)),_===!1?(this.debug("tree.dragStart() cancelled"),s.helper.trigger("mouseup").hide()):(m.smartRevert&&(h=i[x.tree.nodeContainerAttrName].getBoundingClientRect(),u=e(l.options.appendTo)[0].getBoundingClientRect(),l.originalPosition.left=Math.max(0,h.left-u.left),l.originalPosition.top=Math.max(0,h.top-u.top)),N.addClass("fancytree-drag-source"),e(n).on("keydown.fancytree-dnd,mousedown.fancytree-dnd",function(t){"keydown"===t.type&&t.which===e.ui.keyCode.ESCAPE?k.ext.dnd._cancelDrag():"mousedown"===t.type&&k.ext.dnd._cancelDrag()}));break;case"enter":y=(!m.preventRecursiveMoves||!i.isDescendantOf(o))&&(m.dragEnter?m.dragEnter(i,x):null),_=!!y&&(e.isArray(y)?{over:e.inArray("over",y)>=0,before:e.inArray("before",y)>=0,after:e.inArray("after",y)>=0}:{over:y===!0||"over"===y,before:y===!0||"before"===y,after:y===!0||"after"===y}),s.helper.data("enterResponse",_);break;case"over":g=s.helper.data("enterResponse"),v=null,g===!1||("string"==typeof g?v=g:(c=N.offset(),f={x:a.pageX-c.left,y:a.pageY-c.top},p={x:f.x/N.width(),y:f.y/N.height()},g.after&&p.y>.75?v="after":!g.over&&g.after&&p.y>.5?v="after":g.before&&p.y<=.25?v="before":!g.over&&g.before&&p.y<=.5?v="before":g.over&&(v="over"),m.preventVoidMoves&&(i===o?(this.debug("    drop over source node prevented"),v=null):"before"===v&&o&&i===o.getNextSibling()?(this.debug("    drop after source node prevented"),v=null):"after"===v&&o&&i===o.getPrevSibling()?(this.debug("    drop before source node prevented"),v=null):"over"===v&&o&&o.parent===i&&o.isLastSibling()&&(this.debug("    drop last child over own parent prevented"),v=null)),s.helper.data("hitMode",v))),"before"===v||"after"===v||!m.autoExpandMS||i.hasChildren()===!1||i.expanded||m.dragExpand&&m.dragExpand(i,x)===!1||i.scheduleAction("expand",m.autoExpandMS),v&&m.dragOver&&(x.hitMode=v,_=m.dragOver(i,x)),d=_!==!1&&null!==v,m.smartRevert&&(l.options.revert=!d),this._local._setDndStatus(o,i,s.helper,v,d);break;case"drop":v=s.helper.data("hitMode"),v&&m.dragDrop&&(x.hitMode=v,m.dragDrop(i,x));break;case"leave":i.scheduleAction("cancel"),s.helper.data("enterResponse",null),s.helper.data("hitMode",null),this._local._setDndStatus(o,i,s.helper,"out",r),m.dragLeave&&m.dragLeave(i,x);break;case"stop":N.removeClass("fancytree-drag-source"),e(n).off(".fancytree-dnd"),m.dragStop&&m.dragStop(i,x);break;default:e.error("Unsupported drag event: "+t)}return _},_cancelDrag:function(){var t=e.ui.ddmanager.current;t&&t.cancel()}})}(jQuery,window,document)},function(e,t){!function(e,t,n,r){"use strict";function i(t,n){t||(n=n?": "+n:"",e.error("Fancytree assertion failed"+n))}function o(e,n){var r,i,o=t.console?t.console[e]:null;if(o)try{o.apply(t.console,n)}catch(e){for(i="",r=0;r<n.length;r++)i+=n[r];o(i)}}function a(e){return!(!e.tree||e.statusNodeType===r)}function s(t,n,r,i){var o,a,s,l=e.map(e.trim(t).split("."),function(e){return parseInt(e,10)}),d=e.map(Array.prototype.slice.call(arguments,1),function(e){return parseInt(e,10)});for(o=0;o<d.length;o++)if(a=l[o]||0,s=d[o]||0,a!==s)return a>s;return!0}function l(e,t,n,r,i){var o=function(){var n=t[e],o=r[e],a=t.ext[i],s=function(){return n.apply(t,arguments)},l=function(e){return n.apply(t,e)};return function(){var e=t._local,n=t._super,r=t._superApply;try{return t._local=a,t._super=s,t._superApply=l,o.apply(t,arguments)}finally{t._local=e,t._super=n,t._superApply=r}}}();return o}function d(t,n,r,i){for(var o in r)"function"==typeof r[o]?"function"==typeof t[o]?t[o]=l(o,t,n,r,i):"_"===o.charAt(0)?t.ext[i][o]=l(o,t,n,r,i):e.error("Could not override tree."+o+". Use prefix '_' to create tree."+i+"._"+o):"options"!==o&&(t.ext[i][o]=r[o])}function c(t,n){return t===r?e.Deferred(function(){this.resolve()}).promise():e.Deferred(function(){this.resolveWith(t,n)}).promise()}function u(t,n){return t===r?e.Deferred(function(){this.reject()}).promise():e.Deferred(function(){this.rejectWith(t,n)}).promise()}function h(e,t){return function(){e.resolveWith(t)}}function f(t){var n=e.extend({},t.data()),r=n.json;return delete n.fancytree,delete n.uiFancytree,r&&(delete n.json,n=e.extend(n,r)),n}function p(e){return(""+e).replace(w,function(e){return E[e]})}function g(e){return(""+e).replace(C,function(e){return E[e]})}function v(e){return e=e.toLowerCase(),function(t){return t.title.toLowerCase().indexOf(e)>=0}}function y(e){var t=new RegExp("^"+e,"i");return function(e){return t.test(e.title)}}function b(t,n){var r,o,a,s;for(this.parent=t,this.tree=t.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},r=0,o=D.length;r<o;r++)a=D[r],this[a]=n[a];n.data&&e.extend(this.data,n.data);for(a in n)M[a]||e.isFunction(n[a])||j[a]||(this.data[a]=n[a]);null==this.key?this.tree.options.defaultKey?(this.key=this.tree.options.defaultKey(this),i(this.key,"defaultKey() must return a unique key")):this.key="_"+k._nextNodeKey++:this.key=""+this.key,n.active&&(i(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),n.selected&&(this.tree.lastSelectedNode=this),s=n.children,s?s.length?this._setChildren(s):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function m(t){this.widget=t,this.$div=t.element,this.options=t.options,this.options&&(e.isFunction(this.options.lazyload)&&!e.isFunction(this.options.lazyLoad)&&(this.options.lazyLoad=function(){return k.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),t.options.lazyload.apply(this,arguments)}),e.isFunction(this.options.loaderror)&&e.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),this.options.fx!==r&&k.warn("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),this.options.removeNode!==r&&e.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.data=f(this.$div),this._id=e.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var n,i={tree:this};this.rootNode=new b(i,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,n=e("<ul>",{class:"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=n,this.rootNode.ul=n[0],null==this.options.debugLevel&&(this.options.debugLevel=k.debugLevel),this.$container.attr("tabindex",this.options.tabindex),this.options.rtl&&this.$container.attr("DIR","RTL").addClass("fancytree-rtl"),this.options.aria&&(this.$container.attr("role","tree"),1!==this.options.selectMode&&this.$container.attr("aria-multiselectable",!0))}if(e.ui&&e.ui.fancytree)return void e.ui.fancytree.warn("Fancytree: ignored duplicate include");var x,_,k=null,N=new RegExp(/\.|\//),w=/[&<>"'\/]/g,C=/[<>"'\/]/g,S="$recursive_request",E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},T={16:!0,17:!0,18:!0},P={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={0:"",1:"left",2:"middle",3:"right"},F="active expanded focus folder hideCheckbox lazy selected unselectable".split(" "),L={},D="expanded extraClasses folder hideCheckbox icon key lazy refKey selected statusNodeType title tooltip unselectable".split(" "),M={},O={},j={active:!0,children:!0,data:!0,focus:!0};for(x=0;x<F.length;x++)L[F[x]]=!0;for(x=0;x<D.length;x++)_=D[x],M[_]=!0,_!==_.toLowerCase()&&(O[_.toLowerCase()]=_);i(e.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),b.prototype={_findDirectChild:function(e){var t,n,r=this.children;if(r)if("string"==typeof e){for(t=0,n=r.length;t<n;t++)if(r[t].key===e)return r[t]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){i(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var t=0,n=e.length;t<n;t++)this.children.push(new b(this,e[t]))},addChildren:function(t,n){var r,o,a,s=null,l=[];for(e.isPlainObject(t)&&(t=[t]),this.children||(this.children=[]),r=0,o=t.length;r<o;r++)l.push(new b(this,t[r]));return s=l[0],null==n?this.children=this.children.concat(l):(n=this._findDirectChild(n),a=e.inArray(n,this.children),i(a>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[a,0].concat(l))),(!this.parent||this.parent.ul||this.tr)&&this.render(),3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===l.length?l[0]:null),s},addClass:function(e){return this.toggleClass(e,!0)},addNode:function(e,t){switch(t!==r&&"over"!==t||(t="child"),t){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"firstChild":var n=this.children?this.children[0]:null;return this.addChildren(e,n);case"child":case"over":return this.addChildren(e)}i(!1,"Invalid mode: "+t)},addPagingNode:function(t,n){var r,i;if(n=n||"child",t===!1){for(r=this.children.length-1;r>=0;r--)i=this.children[r],"paging"===i.statusNodeType&&this.removeChild(i);return void(this.partload=!1)}return t=e.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},t),this.partload=!0,this.addNode(t,n)},appendSibling:function(e){return this.addNode(e,"after")},applyPatch:function(t){if(null===t)return this.remove(),c(this);var n,r,i,o={children:!0,expanded:!0,parent:!0};for(n in t)i=t[n],o[n]||e.isFunction(i)||(M[n]?this[n]=i:this.data[n]=i);return t.hasOwnProperty("children")&&(this.removeChildren(),t.children&&this._setChildren(t.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),r=t.hasOwnProperty("expanded")?this.setExpanded(t.expanded):c(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,n){return e.addNode(this.toDict(!0,n),t)},countChildren:function(e){var t,n,r,i=this.children;if(!i)return 0;if(r=i.length,e!==!1)for(t=0,n=r;t<n;t++)r+=i[t].countChildren();return r},debug:function(e){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),o("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(e){var t=e?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(t,this)},findAll:function(t){t=e.isFunction(t)?t:v(t);var n=[];return this.visit(function(e){t(e)&&n.push(e)}),n},findFirst:function(t){t=e.isFunction(t)?t:v(t);var n=null;return this.visit(function(e){if(t(e))return n=e,!1}),n},_changeSelectStatusAttrs:function(e){var t=!1;switch(e){case!1:t=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:t=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case r:t=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:i(!1,"invalid state: "+e)}return t&&this.renderStatus(),t},fixSelection3AfterClick:function(){var e=this.isSelected();this.visit(function(t){t._changeSelectStatusAttrs(e)}),this.fixSelection3FromEndNodes()},fixSelection3FromEndNodes:function(){function e(t){var n,i,o,a,s,l,d,c=t.children;if(c&&c.length){for(l=!0,d=!1,n=0,i=c.length;n<i;n++)o=c[n],a=e(o),a!==!1&&(d=!0),a!==!0&&(l=!1);s=!!l||!!d&&r}else s=!!t.selected;return t._changeSelectStatusAttrs(s),s}i(3===this.tree.options.selectMode,"expected selectMode 3"),e(this),this.visitParents(function(e){var t,n,i,o,a=e.children,s=!0,l=!1;for(t=0,n=a.length;t<n;t++)i=a[t],(i.selected||i.partsel)&&(l=!0),i.unselectable||i.selected||(s=!1);o=!!s||!!l&&r,e._changeSelectStatusAttrs(o)})},fromDict:function(t){for(var n in t)M[n]?this[n]=t[n]:"data"===n?e.extend(this.data,t.data):e.isFunction(t[n])||j[n]||(this.data[n]=t[n]);t.children&&(this.removeChildren(),this.addChildren(t.children)),this.renderTitle()},getChildren:function(){return this.hasChildren()===r?r:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return e.inArray(this,this.parent.children)},getIndexHier:function(t,n){t=t||".";var r,i=[];return e.each(this.getParentList(!1,!0),function(e,t){r=""+(t.getIndex()+1),n&&(r=("0000000"+r).substr(-n)),i.push(r)}),i.join(t)},getKeyPath:function(e){var t=[],n=this.tree.options.keyPathSeparator;return this.visitParents(function(e){e.parent&&t.unshift(e.key)},!e),n+t.join(n)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent){var e,t,n=this.parent.children;for(e=0,t=n.length-1;e<t;e++)if(n[e]===this)return n[e+1]}return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var n=[],r=t?this:this.parent;r;)(e||r.parent)&&n.unshift(r),r=r.parent;return n},getPrevSibling:function(){if(this.parent){var e,t,n=this.parent.children;for(e=1,t=n.length;e<t;e++)if(n[e]===this)return n[e-1]}return null},getSelectedNodes:function(e){var t=[];return this.visit(function(n){if(n.selected&&(t.push(n),e===!0))return"skip"}),t},hasChildren:function(){return this.lazy?null==this.children?r:0!==this.children.length&&(1!==this.children.length||!this.children[0].isStatusNode()||r):!(!this.children||!this.children.length)},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(e){this.tree.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),o("info",arguments))},isActive:function(){return this.tree.activeNode===this},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e||e.tree!==this.tree)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var e=this.parent;return!e||e.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var e=this.parent;return!e||e.children[e.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||this.hasChildren()!==r},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return this.hasChildren()===r},isVisible:function(){var e,t,n=this.getParentList(!1,!1);for(e=0,t=n.length;e<t;e++)if(!n[e].expanded)return!1;return!0},lazyLoad:function(e){return this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead."),this.load(e)},load:function(e){var t,n,r=this,o=this.isExpanded();return i(this.isLazy(),"load() requires a lazy node"),e||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),n=this.tree._triggerNodeEvent("lazyLoad",this),n===!1?c(this):(i("boolean"!=typeof n,"lazyLoad event must return source in data.result"),t=this.tree._callHook("nodeLoadChildren",this,n),o?(this.expanded=!0,t.always(function(){r.render()})):t.always(function(){r.renderStatus()}),t)):c(this)},makeVisible:function(t){var n,r=this,i=[],o=new e.Deferred,a=this.getParentList(!1,!1),s=a.length,l=!(t&&t.noAnimation===!0),d=!(t&&t.scrollIntoView===!1);for(n=s-1;n>=0;n--)i.push(a[n].setExpanded(!0,t));return e.when.apply(e,i).done(function(){d?r.scrollIntoView(l).done(function(){o.resolve()}):o.resolve()}),o.promise()},moveTo:function(t,n,o){n===r||"over"===n?n="child":"firstChild"===n&&(t.children&&t.children.length?(n="before",t=t.children[0]):n="child");var a,s=this.parent,l="child"===n?t:t.parent;if(this!==t){if(this.parent?l.isDescendantOf(this)&&e.error("Cannot move a node to its own descendant"):e.error("Cannot move system root"),l!==s&&s.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===l)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else a=e.inArray(this,this.parent.children),i(a>=0,"invalid source parent"),this.parent.children.splice(a,1);if(this.parent=l,l.hasChildren())switch(n){case"child":l.children.push(this);break;case"before":a=e.inArray(t,l.children),i(a>=0,"invalid target parent"),l.children.splice(a,0,this);break;case"after":a=e.inArray(t,l.children),i(a>=0,"invalid target parent"),l.children.splice(a+1,0,this);break;default:e.error("Invalid mode "+n)}else l.children=[this];o&&t.visit(o,!0),l===s?l.triggerModifyChild("move",this):l.triggerModifyChild("add",this),this.tree!==t.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(e){e.tree=t.tree},!0)),s.isDescendantOf(l)||s.render(),l.isDescendantOf(s)||l===s||l.render()}},navigate:function(t,n){function r(r){if(r){try{r.makeVisible({scrollIntoView:!1})}catch(e){}return e(r.span).is(":visible")?n===!1?r.setFocus():r.setActive():(r.debug("Navigate: skipping hidden node"),void r.navigate(t,n))}}var i,o,a,s=!0,l=e.ui.keyCode,d=null;switch(t){case l.BACKSPACE:this.parent&&this.parent.parent&&(a=r(this.parent));break;case l.HOME:this.tree.visit(function(t){if(e(t.span).is(":visible"))return a=r(t),!1});break;case l.END:this.tree.visit(function(t){e(t.span).is(":visible")&&(a=t)}),a&&(a=r(a));break;case l.LEFT:this.expanded?(this.setExpanded(!1),a=r(this)):this.parent&&this.parent.parent&&(a=r(this.parent));break;case l.RIGHT:this.expanded||!this.children&&!this.lazy?this.children&&this.children.length&&(a=r(this.children[0])):(this.setExpanded(),a=r(this));break;case l.UP:for(d=this.getPrevSibling();d&&!e(d.span).is(":visible");)d=d.getPrevSibling();for(;d&&d.expanded&&d.children&&d.children.length;)d=d.children[d.children.length-1];!d&&this.parent&&this.parent.parent&&(d=this.parent),a=r(d);break;case l.DOWN:if(this.expanded&&this.children&&this.children.length)d=this.children[0];else for(o=this.getParentList(!1,!0),i=o.length-1;i>=0;i--){for(d=o[i].getNextSibling();d&&!e(d.span).is(":visible");)d=d.getNextSibling();if(d)break}a=r(d);break;default:s=!1}return a||c()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(t){var n,r=this.parent,o=e.inArray(this,r.children),a=this;return i(this.isPagingNode(),"replaceWith() currently requires a paging status node"),n=this.tree._callHook("nodeLoadChildren",this,t),n.done(function(e){var t=a.children;for(x=0;x<t.length;x++)t[x].parent=r;r.children.splice.apply(r.children,[o+1,0].concat(t)),a.children=null,a.remove(),r.render()}).fail(function(){a.setExpanded()}),n},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=r,this.renderStatus()},scheduleAction:function(t,n){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var r=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){r.tree.debug("setTimeout: trigger expand"),r.setExpanded(!0)},n);break;case"activate":this.tree.timer=setTimeout(function(){r.tree.debug("setTimeout: trigger activate"),r.setActive(!0)},n);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(o,s){s!==r&&a(s)&&(this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead."),s={topNode:s});var l,d,u,h,f=e.extend({effects:o===!0?{duration:200,queue:!1}:o,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent||this.tree.$container,topNode:null},s),p=new e.Deferred,g=this,v=e(this.span).height(),y=e(f.scrollParent),b=f.scrollOfs.top||0,m=f.scrollOfs.bottom||0,x=y.height(),_=y.scrollTop(),k=y,N=y[0]===t,w=f.topNode||null,C=null;return e(this.span).is(":visible")?(N?(d=e(this.span).offset().top,
l=w&&w.span?e(w.span).offset().top:0,k=e("html,body")):(i(y[0]!==n&&y[0]!==n.body,"scrollParent should be a simple element or `window`, not document or body."),h=y.offset().top,d=e(this.span).offset().top-h+_,l=w?e(w.span).offset().top-h+_:0,u=Math.max(0,y.innerHeight()-y[0].clientHeight),x-=u),d<_+b?C=d-b:d+v>_+x-m&&(C=d+v-x+m,w&&(i(w.isRootNode()||e(w.span).is(":visible"),"topNode must be visible"),l<C&&(C=l-b))),null!==C?f.effects?(f.effects.complete=function(){p.resolveWith(g)},k.stop(!0).animate({scrollTop:C},f.effects)):(k[0].scrollTop=C,p.resolveWith(this)):p.resolveWith(this),p.promise()):(this.warn("scrollIntoView(): node is invisible."),c())},setActive:function(e,t){return this.tree._callHook("nodeSetActive",this,e,t)},setExpanded:function(e,t){return this.tree._callHook("nodeSetExpanded",this,e,t)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e){return this.tree._callHook("nodeSetSelected",this,e)},setStatus:function(e,t,n){return this.tree._callHook("nodeSetStatus",this,e,t,n)},setTitle:function(e){this.title=e,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(e,t){var n,r,i=this.children;if(i){if(e=e||function(e,t){var n=e.title.toLowerCase(),r=t.title.toLowerCase();return n===r?0:n>r?1:-1},i.sort(e),t)for(n=0,r=i.length;n<r;n++)i[n].children&&i[n].sortChildren(e,"$norender$");"$norender$"!==t&&this.render(),this.triggerModifyChild("sort")}},toDict:function(t,n){var r,i,o,a={},s=this;if(e.each(D,function(e,t){(s[t]||s[t]===!1)&&(a[t]=s[t])}),e.isEmptyObject(this.data)||(a.data=e.extend({},this.data),e.isEmptyObject(a.data)&&delete a.data),n&&n(a,s),t&&this.hasChildren())for(a.children=[],r=0,i=this.children.length;r<i;r++)o=this.children[r],o.isStatusNode()||a.children.push(o.toDict(!0,n));return a},toggleClass:function(t,n){var i,o,a=/\S+/g,s=t.match(a)||[],l=0,d=!1,c=this[this.tree.statusClassPropName],u=" "+(this.extraClasses||"")+" ";for(c&&e(c).toggleClass(t,n);i=s[l++];)if(o=u.indexOf(" "+i+" ")>=0,n=n===r?!o:!!n)o||(u+=i+" ",d=!0);else for(;u.indexOf(" "+i+" ")>-1;)u=u.replace(" "+i+" "," ");return this.extraClasses=e.trim(u),d},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>"},triggerModifyChild:function(t,n,r){var i,o=this.tree.options.modifyChild;o&&(n&&n.parent!==this&&e.error("childNode "+n+" is not a child of "+this),i={node:this,tree:this.tree,operation:t,childNode:n||null},r&&e.extend(i,r),o({type:"modifyChild"},i))},triggerModify:function(e,t){this.parent.triggerModifyChild(e,this,t)},visit:function(e,t){var n,r,i=!0,o=this.children;if(t===!0&&(i=e(this),i===!1||"skip"===i))return i;if(o)for(n=0,r=o.length;n<r&&(i=o[n].visit(e,!0),i!==!1);n++);return i},visitAndLoad:function(t,n,r){var i,o,a,s=this;return t&&n===!0&&(o=t(s),o===!1||"skip"===o)?r?o:c():s.children||s.lazy?(i=new e.Deferred,a=[],s.load().done(function(){for(var n=0,r=s.children.length;n<r;n++){if(o=s.children[n].visitAndLoad(t,!0,!0),o===!1){i.reject();break}"skip"!==o&&a.push(o)}e.when.apply(this,a).then(function(){i.resolve()})}),i.promise()):c()},visitParents:function(e,t){if(t&&e(this)===!1)return!1;for(var n=this.parent;n;){if(e(n)===!1)return!1;n=n.parent}return!0},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),o("warn",arguments)}},m.prototype={_makeHookContext:function(t,n,i){var o,a;return t.node!==r?(n&&t.originalEvent!==n&&e.error("invalid args"),o=t):t.tree?(a=t.tree,o={node:t,tree:a,widget:a.widget,options:a.widget.options,originalEvent:n}):t.widget?o={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:n}:e.error("invalid args"),i&&e.extend(o,i),o},_callHook:function(t,n,r){var i=this._makeHookContext(n),o=this[t],a=Array.prototype.slice.call(arguments,2);return e.isFunction(o)||e.error("_callHook('"+t+"') is not a function"),a.unshift(i),o.apply(this,a)},_requireExtension:function(t,n,r,o){r=!!r;var a=this._local.name,s=this.options.extensions,l=e.inArray(t,s)<e.inArray(a,s),d=n&&null==this.ext[t],c=!d&&null!=r&&r!==l;return i(a&&a!==t,"invalid or same name"),!d&&!c||(o||(d||n?(o="'"+a+"' extension requires '"+t+"'",c&&(o+=" to be registered "+(r?"before":"after")+" itself")):o="If used together, `"+t+"` must be registered "+(r?"before":"after")+" `"+a+"`"),e.error(o),!1)},activateKey:function(e){var t=this.getNodeByKey(e);return t?t.setActive():this.activeNode&&this.activeNode.setActive(!1),t},addPagingNode:function(e,t){return this.rootNode.addPagingNode(e,t)},applyPatch:function(t){var n,r,o,a,s,l,d=t.length,c=[];for(r=0;r<d;r++)o=t[r],i(2===o.length,"patchList must be an array of length-2-arrays"),a=o[0],s=o[1],l=null===a?this.rootNode:this.getNodeByKey(a),l?(n=new e.Deferred,c.push(n),l.applyPatch(s).always(h(n,l))):this.warn("could not find node with key '"+a+"'");return e.when.apply(e,c).promise()},clear:function(e){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),o("log",arguments))},enableUpdate:function(e){return e=e!==!1,!!this._enableUpdate==!!e?e:(this._enableUpdate=e,e?(this.debug("enableUpdate(true): redraw ",this._dirtyRoots),this.render()):this.debug("enableUpdate(false)..."),!e)},findAll:function(e){return this.rootNode.findAll(e)},findFirst:function(e){return this.rootNode.findFirst(e)},findNextNode:function(t,n,r){var i=null,o=n.parent.children,a=null,s=function(e,t,n){var r,i,o=e.children,a=o.length,l=o[t];if(l&&n(l)===!1)return!1;if(l&&l.children&&l.expanded&&s(l,0,n)===!1)return!1;for(r=t+1;r<a;r++)if(s(e,r,n)===!1)return!1;return i=e.parent,i?s(i,i.children.indexOf(e)+1,n):s(e,0,n)};return t="string"==typeof t?y(t):t,n=n||this.getFirstChild(),s(n.parent,o.indexOf(n),function(r){return r!==i&&(i=i||r,e(r.span).is(":visible")?(!t(r)||(a=r,a===n))&&void 0:void r.debug("quicksearch: skipping hidden node"))}),a},generateFormElements:function(t,n,r){function i(t){d.append(e("<input>",{type:"checkbox",name:a,value:t.key,checked:!0}))}r=r||{};var o,a="string"==typeof t?t:"ft_"+this._id+"[]",s="string"==typeof n?n:"ft_"+this._id+"_active",l="fancytree_result_"+this._id,d=e("#"+l),c=3===this.options.selectMode&&r.stopOnParents!==!1;d.length?d.empty():d=e("<div>",{id:l}).hide().insertAfter(this.$container),n!==!1&&this.activeNode&&d.append(e("<input>",{type:"radio",name:s,value:this.activeNode.key,checked:!0})),r.filter?this.visit(function(e){var t=r.filter(e);return"skip"===t?t:void(t!==!1&&i(e))}):t!==!1&&(o=this.getSelectedNodes(c),e.each(o,function(e,t){i(t)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getNodeByKey:function(e,t){var r,i;return!t&&(r=n.getElementById(this.options.idPrefix+e))?r.ftnode?r.ftnode:null:(t=t||this.rootNode,i=null,t.visit(function(t){if(t.key===e)return i=t,!1},!0),i)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),o("info",arguments))},loadKeyPath:function(t,n,i){function o(e,t,r){n.call(y,t,"loading"),t.load().done(function(){y.loadKeyPath.call(y,u[e],n,t).always(h(r,y))}).fail(function(i){y.warn("loadKeyPath: error loading: "+e+" (parent: "+p+")"),n.call(y,t,"error"),r.reject()})}var a,s,l,d,c,u,f,p,g,v=this.options.keyPathSeparator,y=this;for(n=n||e.noop,e.isArray(t)||(t=[t]),u={},l=0;l<t.length;l++)for(p=i||this.rootNode,d=t[l],d.charAt(0)===v&&(d=d.substr(1)),g=d.split(v);g.length;){if(c=g.shift(),f=p._findDirectChild(c),!f){this.warn("loadKeyPath: key not found: "+c+" (parent: "+p+")"),n.call(this,c,"error");break}if(0===g.length){n.call(this,f,"ok");break}if(f.lazy&&f.hasChildren()===r){n.call(this,f,"loaded"),u[c]?u[c].push(g.join(v)):u[c]=[g.join(v)];break}n.call(this,f,"loaded"),p=f}a=[];for(c in u)f=p._findDirectChild(c),null==f&&(f=y.getNodeByKey(c)),s=new e.Deferred,a.push(s),o(c,f,s);return e.when.apply(e,a).promise()},reactivate:function(e){var t,n=this.activeNode;return n?(this.activeNode=null,t=n.setActive(!0,{noFocus:!0}),e&&n.setFocus(),t):c()},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},toDict:function(e,t){var n=this.rootNode.toDict(!0,t);return e?n:n.children},toString:function(){return"<Fancytree(#"+this._id+")>"},_triggerNodeEvent:function(e,t,n,i){var o=this._makeHookContext(t,n,i),a=this.widget._trigger(e,n,o);return a!==!1&&o.result!==r?o.result:a},_triggerTreeEvent:function(e,t,n){var i=this._makeHookContext(this,t,n),o=this.widget._trigger(e,t,i);return o!==!1&&i.result!==r?i.result:o},visit:function(e){return this.rootNode.visit(e,!1)},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),o("warn",arguments)}},e.extend(m.prototype,{nodeClick:function(e){var t,n,r=e.targetType,i=e.node;if("expander"===r){if(i.isLoading())return void i.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",e)}else if("checkbox"===r)this._callHook("nodeToggleSelected",e),e.options.focusOnSelect&&this._callHook("nodeSetFocus",e,!0);else{if(n=!1,t=!0,i.folder)switch(e.options.clickFolderMode){case 2:n=!0,t=!1;break;case 3:t=!0,n=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),n&&this._callHook("nodeToggleExpanded",e)}},nodeCollapseSiblings:function(e,t){var n,r,i,o=e.node;if(o.parent)for(n=o.parent.children,r=0,i=n.length;r<i;r++)n[r]!==o&&n[r].expanded&&this._callHook("nodeSetExpanded",n[r],!1,t)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(t){var n,r,i,o,a=t.originalEvent,s=t.node,l=t.tree,d=t.options,c=a.which,u=String.fromCharCode(c),h=!(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey),f=e(a.target),p=!0,g=!(a.ctrlKey||!d.autoActivate);if(s||(o=this.getActiveNode()||this.getFirstChild(),o&&(o.setFocus(),s=t.node=this.focusNode,s.debug("Keydown force focus on active node"))),d.quicksearch&&h&&/\w/.test(u)&&!P[c]&&!f.is(":input:enabled"))return r=(new Date).getTime(),r-l.lastQuicksearchTime>500&&(l.lastQuicksearchTerm=""),l.lastQuicksearchTime=r,l.lastQuicksearchTerm+=u,n=l.findNextNode(l.lastQuicksearchTerm,l.getActiveNode()),n&&n.setActive(),void a.preventDefault();switch(k.eventToString(a)){case"+":case"=":l.nodeSetExpanded(t,!0);break;case"-":l.nodeSetExpanded(t,!1);break;case"space":s.isPagingNode()?l._triggerNodeEvent("clickPaging",t,a):d.checkbox?l.nodeToggleSelected(t):l.nodeSetActive(t,!0);break;case"return":l.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":i=s.navigate(a.which,g,!0);break;default:p=!1}p&&a.preventDefault()},nodeLoadChildren:function(t,n){var r,o,a,s=t.tree,l=t.node,d=(new Date).getTime();return e.isFunction(n)&&(n=n.call(s,{type:"source"},t),i(!e.isFunction(n),"source callback must not return another function")),n.url&&(l._requestId&&l.warn("Recursive load request #"+d+" while #"+l._requestId+" is pending."),r=e.extend({},t.options.ajax,n),l._requestId=d,r.debugDelay?(o=r.debugDelay,e.isArray(o)&&(o=o[0]+Math.random()*(o[1]-o[0])),l.warn("nodeLoadChildren waiting debugDelay "+Math.round(o)+" ms ..."),r.debugDelay=!1,a=e.Deferred(function(t){setTimeout(function(){e.ajax(r).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},o)})):a=e.ajax(r),n=new e.Deferred,a.done(function(r,i,o){var a,c;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof r||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),l._requestId&&l._requestId>d)return void n.rejectWith(this,[S]);if(t.options.postProcess){try{c=s._triggerNodeEvent("postProcess",t,t.originalEvent,{response:r,error:null,dataType:this.dataType})}catch(e){c={error:e,message:""+e,details:"postProcess failed"}}if(c.error)return a=e.isPlainObject(c.error)?c.error:{message:c.error},a=s._makeHookContext(l,null,a),void n.rejectWith(this,[a]);r=e.isArray(c)?c:r}else r&&r.hasOwnProperty("d")&&t.options.enableAspx&&(r="string"==typeof r.d?e.parseJSON(r.d):r.d);n.resolveWith(this,[r])}).fail(function(e,t,r){var i=s._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:r,details:e.status+": "+r});n.rejectWith(this,[i])})),e.isFunction(n.then)&&e.isFunction(n.catch)&&(a=n,n=new e.Deferred,a.then(function(e){n.resolve(e)},function(e){n.reject(e)})),e.isFunction(n.promise)&&(s.nodeSetStatus(t,"loading"),n.done(function(e){s.nodeSetStatus(t,"ok"),l._requestId=null}).fail(function(e){var n;return e===S?void l.warn("Ignored response for obsolete load request #"+d+" (expected #"+l._requestId+")"):(e.node&&e.error&&e.message?n=e:(n=s._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""}),"[object Object]"===n.message&&(n.message="")),l.warn("Load children failed ("+n.message+")",n),void(s._triggerNodeEvent("loadError",n,null)!==!1&&s.nodeSetStatus(t,"error",n.message,n.details)))})),e.when(n).done(function(t){var n;e.isPlainObject(t)&&(i(l.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),i(e.isArray(t.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),n=t,t=t.children,delete n.children,e.extend(s.data,n)),i(e.isArray(t),"expected array of children"),l._setChildren(t),s._triggerNodeEvent("loadChildren",l)})},nodeLoadKeyPath:function(e,t){},nodeRemoveChild:function(t,n){var r,o=t.node,a=e.extend({},t,{node:n}),s=o.children;return 1===s.length?(i(n===s[0],"invalid single child"),this.nodeRemoveChildren(t)):(this.activeNode&&(n===this.activeNode||this.activeNode.isDescendantOf(n))&&this.activeNode.setActive(!1),this.focusNode&&(n===this.focusNode||this.focusNode.isDescendantOf(n))&&(this.focusNode=null),this.nodeRemoveMarkup(a),this.nodeRemoveChildren(a),r=e.inArray(n,s),i(r>=0,"invalid child"),o.triggerModifyChild("remove",n),n.visit(function(e){e.parent=null},!0),this._callHook("treeRegisterNode",this,!1,n),void s.splice(r,1))},nodeRemoveChildMarkup:function(t){var n=t.node;n.ul&&(n.isRootNode()?e(n.ul).empty():(e(n.ul).remove(),n.ul=null),n.visit(function(e){e.li=e.ul=null}))},nodeRemoveChildren:function(t){var n,r=t.tree,i=t.node,o=i.children;o&&(this.activeNode&&this.activeNode.isDescendantOf(i)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(i)&&(this.focusNode=null),this.nodeRemoveChildMarkup(t),n=e.extend({},t),i.triggerModifyChild("remove",null),i.visit(function(e){e.parent=null,r._callHook("treeRegisterNode",r,!1,e)}),i.lazy?i.children=[]:i.children=null,i.isRootNode()||(i.expanded=!1),this.nodeRenderStatus(t))},nodeRemoveMarkup:function(t){var n=t.node;n.li&&(e(n.li).remove(),n.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(t,r,o,a,s){var l,d,c,u,h,f,p,g=t.node,v=t.tree,y=t.options,b=y.aria,m=!1,x=g.parent,_=!x,k=g.children,N=null;if(v._enableUpdate!==!1&&(_||x.ul)){if(i(_||x.ul,"parent UL must exist"),_||(g.li&&(r||g.li.parentNode!==g.parent.ul)&&(g.li.parentNode===g.parent.ul?N=g.li.nextSibling:this.debug("Unlinking "+g+" (must be child of "+g.parent+")"),this.nodeRemoveMarkup(t)),g.li?this.nodeRenderStatus(t):(m=!0,g.li=n.createElement("li"),g.li.ftnode=g,g.key&&y.generateIds&&(g.li.id=y.idPrefix+g.key),g.span=n.createElement("span"),g.span.className="fancytree-node",b&&e(g.li).attr("aria-labelledby","ftal_"+y.idPrefix+g.key),g.li.appendChild(g.span),this.nodeRenderTitle(t),y.createNode&&y.createNode.call(v,{type:"createNode"},t)),y.renderNode&&y.renderNode.call(v,{type:"renderNode"},t)),k){if(_||g.expanded||o===!0){for(g.ul||(g.ul=n.createElement("ul"),(a!==!0||s)&&g.expanded||(g.ul.style.display="none"),b&&e(g.ul).attr("role","group"),g.li?g.li.appendChild(g.ul):g.tree.$div.append(g.ul)),u=0,h=k.length;u<h;u++)p=e.extend({},t,{node:k[u]}),this.nodeRender(p,r,o,!1,!0);for(l=g.ul.firstChild;l;)c=l.ftnode,c&&c.parent!==g?(g.debug("_fixParent: remove missing "+c,l),f=l.nextSibling,l.parentNode.removeChild(l),l=f):l=l.nextSibling;for(l=g.ul.firstChild,u=0,h=k.length-1;u<h;u++)d=k[u],c=l.ftnode,d!==c?g.ul.insertBefore(d.li,c.li):l=l.nextSibling}}else g.ul&&(this.warn("remove child markup for "+g),this.nodeRemoveChildMarkup(t));_||m&&x.ul.insertBefore(g.li,N)}},nodeRenderTitle:function(t,n){var i,o,a,s,l,d,c=t.node,u=t.tree,h=t.options,f=h.aria,v=c.getLevel(),y=[];n!==r&&(c.title=n),c.span&&u._enableUpdate!==!1&&(v<h.minExpandLevel?(c.lazy||(c.expanded=!0),v>1&&(f?y.push("<span role='button' class='fancytree-expander fancytree-expander-fixed'></span>"):y.push("<span class='fancytree-expander fancytree-expander-fixed''></span>"))):f?y.push("<span role='button' class='fancytree-expander'></span>"):y.push("<span class='fancytree-expander'></span>"),h.checkbox&&c.hideCheckbox!==!0&&!c.isStatusNode()&&(f?y.push("<span role='checkbox' class='fancytree-checkbox'></span>"):y.push("<span class='fancytree-checkbox'></span>")),c.data.iconClass!==r&&(c.icon?e.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(c.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),c.icon=c.data.iconClass)),e.isFunction(h.icon)?(o=h.icon.call(u,{type:"icon"},t),null==o&&(o=c.icon)):o=null!=c.icon?c.icon:h.icon,null==o?o=!0:"boolean"!=typeof o&&(o=""+o),o!==!1&&(s=f?" role='img'":"","string"==typeof o?N.test(o)?(o="/"===o.charAt(0)?o:(h.imagePath||"")+o,y.push("<img src='"+o+"' class='fancytree-icon' alt='' />")):y.push("<span "+s+" class='fancytree-custom-icon "+o+"'></span>"):y.push("<span "+s+" class='fancytree-icon'></span>")),a="",h.renderTitle&&(a=h.renderTitle.call(u,{type:"renderTitle"},t)||""),a||(c.tooltip?d=c.tooltip:h.tooltip&&(d=h.tooltip===!0?c.title:h.tooltip.call(u,c)),d=d?" title='"+g(d)+"'":"",i=f?" id='ftal_"+h.idPrefix+c.key+"'":"",s=f?" role='treeitem'":"",l=h.titlesTabbable?" tabindex='0'":"",a="<span "+s+" class='fancytree-title'"+i+d+l+">"+(h.escapeTitles?p(c.title):c.title)+"</span>"),y.push(a),c.span.innerHTML=y.join(""),this.nodeRenderStatus(t),h.enhanceTitle&&(t.$title=e(">span.fancytree-title",c.span),a=h.enhanceTitle.call(u,{type:"enhanceTitle"},t)||""))},nodeRenderStatus:function(t){var n=t.node,r=t.tree,i=t.options,o=n.hasChildren(),a=n.isLastSibling(),s=i.aria,l=e(n.span).find(".fancytree-title"),d=i._classNames,c=[],u=n[r.statusClassPropName];u&&r._enableUpdate!==!1&&(c.push(d.node),r.activeNode===n&&c.push(d.active),r.focusNode===n&&c.push(d.focused),n.expanded?(c.push(d.expanded),s&&l.attr("aria-expanded",!0)):s&&(o?l.attr("aria-expanded",!1):l.removeAttr("aria-expanded")),n.folder&&c.push(d.folder),o!==!1&&c.push(d.hasChildren),a&&c.push(d.lastsib),n.lazy&&null==n.children&&c.push(d.lazy),n.partload&&c.push(d.partload),n.partsel&&c.push(d.partsel),n.unselectable&&c.push(d.unselectable),n._isLoading&&c.push(d.loading),n._error&&c.push(d.error),n.statusNodeType&&c.push(d.statusNodePrefix+n.statusNodeType),n.selected?(c.push(d.selected),s&&l.attr("aria-selected",!0)):s&&l.attr("aria-selected",!1),n.extraClasses&&c.push(n.extraClasses),o===!1?c.push(d.combinedExpanderPrefix+"n"+(a?"l":"")):c.push(d.combinedExpanderPrefix+(n.expanded?"e":"c")+(n.lazy&&null==n.children?"d":"")+(a?"l":"")),c.push(d.combinedIconPrefix+(n.expanded?"e":"c")+(n.folder?"f":"")),u.className=c.join(" "),n.li&&(n.li.className=a?d.lastsib:""))},nodeSetActive:function(t,n,r){r=r||{};var o,a=t.node,s=t.tree,l=t.options,d=r.noEvents===!0,h=r.noFocus===!0,f=a===s.activeNode;return n=n!==!1,f===n?c(a):n&&!d&&this._triggerNodeEvent("beforeActivate",a,t.originalEvent)===!1?u(a,["rejected"]):(n?(s.activeNode&&(i(s.activeNode!==a,"node was active (inconsistency)"),o=e.extend({},t,{node:s.activeNode}),s.nodeSetActive(o,!1),i(null===s.activeNode,"deactivate was out of sync?")),l.activeVisible&&a.makeVisible({scrollIntoView:h&&null==s.focusNode}),s.activeNode=a,s.nodeRenderStatus(t),h||s.nodeSetFocus(t),d||s._triggerNodeEvent("activate",a,t.originalEvent)):(i(s.activeNode===a,"node was not active (inconsistency)"),s.activeNode=null,this.nodeRenderStatus(t),d||t.tree._triggerNodeEvent("deactivate",a,t.originalEvent)),c(a))},nodeSetExpanded:function(t,n,i){i=i||{};var o,a,s,l,d,h,f=t.node,p=t.tree,g=t.options,v=i.noAnimation===!0,y=i.noEvents===!0;if(n=n!==!1,f.expanded&&n||!f.expanded&&!n)return c(f);if(n&&!f.lazy&&!f.hasChildren())return c(f);if(!n&&f.getLevel()<g.minExpandLevel)return u(f,["locked"]);if(!y&&this._triggerNodeEvent("beforeExpand",f,t.originalEvent)===!1)return u(f,["rejected"]);if(v||f.isVisible()||(v=i.noAnimation=!0),a=new e.Deferred,n&&!f.expanded&&g.autoCollapse){d=f.getParentList(!1,!0),h=g.autoCollapse;try{for(g.autoCollapse=!1,s=0,l=d.length;s<l;s++)this._callHook("nodeCollapseSiblings",d[s],i)}finally{g.autoCollapse=h}}return a.done(function(){var e=f.getLastChild();n&&g.autoScroll&&!v&&e?e.scrollIntoView(!0,{topNode:f}).always(function(){y||t.tree._triggerNodeEvent(n?"expand":"collapse",t)}):y||t.tree._triggerNodeEvent(n?"expand":"collapse",t)}),o=function(r){var i,o,a=g.toggleEffect;if(f.expanded=n,p._callHook("nodeRender",t,!1,!1,!0),f.ul)if(i="none"!==f.ul.style.display,o=!!f.expanded,i===o)f.warn("nodeSetExpanded: UL.style.display already set");else{if(a&&!v)return void e(f.ul).toggle(a.effect,a.options,a.duration,function(){r()});f.ul.style.display=f.expanded||!parent?"":"none"}r()},n&&f.lazy&&f.hasChildren()===r?f.load().done(function(){a.notifyWith&&a.notifyWith(f,["loaded"]),o(function(){a.resolveWith(f)})}).fail(function(e){o(function(){a.rejectWith(f,["load failed ("+e+")"])})}):o(function(){a.resolveWith(f)}),a.promise()},nodeSetFocus:function(t,r){var i,o=t.tree,a=t.node,s=o.options,l=!!t.originalEvent&&e(t.originalEvent.target).is(":input");if(r=r!==!1,o.focusNode){if(o.focusNode===a&&r)return;i=e.extend({},t,{node:o.focusNode}),o.focusNode=null,this._triggerNodeEvent("blur",i),this._callHook("nodeRenderStatus",i)}r&&(this.hasFocus()||(a.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,{calledByNode:!0})),a.makeVisible({scrollIntoView:!1}),o.focusNode=a,s.titlesTabbable?l||e(a.span).find(".fancytree-title").focus():0===e(n.activeElement).closest(".fancytree-container").length&&e(o.$container).focus(),s.aria&&e(o.$container).attr("aria-activedescendant","ftal_"+s.idPrefix+a.key),this._triggerNodeEvent("focus",t),s.autoScroll&&a.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(e,t){var n=e.node,r=e.tree,i=e.options;if(t=t!==!1,!n.unselectable){if(n.selected&&t||!n.selected&&!t)return!!n.selected;if(this._triggerNodeEvent("beforeSelect",n,e.originalEvent)===!1)return!!n.selected;t&&1===i.selectMode?r.lastSelectedNode&&r.lastSelectedNode.setSelected(!1):3===i.selectMode&&(n.selected=t,n.fixSelection3AfterClick()),n.selected=t,this.nodeRenderStatus(e),r.lastSelectedNode=t?n:null,r._triggerNodeEvent("select",e)}},nodeSetStatus:function(t,n,r,i){function o(){var e=s.children?s.children[0]:null;if(e&&e.isStatusNode()){try{s.ul&&(s.ul.removeChild(e.li),e.li=null)}catch(e){}1===s.children.length?s.children=[]:s.children.shift()}}function a(t,n){var r=s.children?s.children[0]:null;return r&&r.isStatusNode()?(e.extend(r,t),r.statusNodeType=n,l._callHook("nodeRenderTitle",r)):(s._setChildren([t]),s.children[0].statusNodeType=n,l.render()),s.children[0]}var s=t.node,l=t.tree;switch(n){case"ok":o(),s._isLoading=!1,s._error=null,s.renderStatus();break;case"loading":s.parent||a({title:l.options.strings.loading+(r?" ("+r+")":""),checkbox:!1,tooltip:i},n),s._isLoading=!0,s._error=null,s.renderStatus();break;case"error":a({title:l.options.strings.loadError+(r?" ("+r+")":""),checkbox:!1,tooltip:i},n),s._isLoading=!1,s._error={message:r,details:i},s.renderStatus();break;case"nodata":a({title:l.options.strings.noData,checkbox:!1,tooltip:i},n),s._isLoading=!1,s._error=null,s.renderStatus();break;default:e.error("invalid node status "+n)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){return this.nodeSetSelected(e,!e.node.selected)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null},treeCreate:function(e){},treeDestroy:function(e){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden")},treeInit:function(e){this.treeLoad(e)},treeLoad:function(t,n){var r,o,a,s,l=t.tree,d=t.widget.element,c=e.extend({},t,{node:this.rootNode});if(l.rootNode.children&&this.treeClear(t),n=n||this.options.source)"string"==typeof n&&e.error("Not implemented");else switch(o=d.data("type")||"html"){case"html":a=d.find(">ul:first"),a.addClass("ui-fancytree-source ui-helper-hidden"),n=e.ui.fancytree.parseHtml(a),this.data=e.extend(this.data,f(a));break;case"json":n=e.parseJSON(d.text()),d.contents().filter(function(){return 3===this.nodeType}).remove(),e.isPlainObject(n)&&(i(e.isArray(n.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),r=n,n=n.children,delete r.children,e.extend(l.data,r));break;default:e.error("Invalid data-type: "+o)}return s=this.nodeLoadChildren(c,n).done(function(){l.render(),3===t.options.selectMode&&l.rootNode.fixSelection3FromEndNodes(),l.activeNode&&l.options.activeVisible&&l.activeNode.makeVisible(),l._triggerTreeEvent("init",null,{status:!0})}).fail(function(){l.render(),l._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(e,t,n){},treeSetFocus:function(t,n,r){n=n!==!1,n!==this.hasFocus()&&(this._hasFocus=n,!n&&this.focusNode?this.focusNode.setFocus(!1):!n||r&&r.calledByNode||e(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",n),this._triggerTreeEvent(n?"focusTree":"blurTree"),n&&!this.activeNode&&this.getFirstChild()&&this.getFirstChild().setFocus())},treeSetOption:function(t,n,r){var i=t.tree,o=!0,a=!1;switch(n){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":i._callHook("treeCreate",i),a=!0;break;case"escapeTitles":case"tooltip":a=!0;break;case"rtl":r===!1?i.$container.attr("DIR",null).removeClass("fancytree-rtl"):i.$container.attr("DIR","RTL").addClass("fancytree-rtl"),a=!0;break;case"source":o=!1,i._callHook("treeLoad",i,r),a=!0}i.debug("set option "+n+"="+r+" <"+typeof r+">"),o&&(this.widget._super?this.widget._super.call(this.widget,n,r):e.Widget.prototype._setOption.call(this.widget,n,r)),a&&i.render(!0,!1)}}),e.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!1,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,escapeTitles:!1,extensions:[],toggleEffect:{effect:"blind",options:{direction:"vertical",scale:"box"},duration:200},generateIds:!1,icon:!0,idPrefix:"ft_",focusOnSelect:!1,keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading&#8230;",loadError:"Load error!",moreData:"More&#8230;",noData:"No data."},tabindex:"0",titlesTabbable:!1,tooltip:!1,_classNames:{node:"fancytree-node",folder:"fancytree-folder",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partload:"fancytree-partload",partsel:"fancytree-partsel",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error",statusNodePrefix:"fancytree-statusnode-"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new m(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var t,n,o,a=this.options,s=a.extensions,l=this.tree;for(o=0;o<s.length;o++)n=s[o],t=e.ui.fancytree._extensions[n],t||e.error("Could not apply extension '"+n+"' (it is not registered, did you forget to include it?)"),this.tree.options[n]=e.extend(!0,{},t.options,this.tree.options[n]),i(this.tree.ext[n]===r,"Extension name must not exist as Fancytree.ext attribute: '"+n+"'"),this.tree.ext[n]={},d(this.tree,l,t,n),l=t;a.icons!==r&&(a.icon!==!0?e.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),a.icon=a.icons)),a.iconClass!==r&&(a.icon?e.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),a.icon=a.iconClass)),a.tabbable!==r&&(a.tabindex=a.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+a.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(e,t){return this.tree._callHook("treeSetOption",this.tree,e,t)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),e.Widget.prototype.destroy.call(this)},_unbind:function(){var t=this.tree._ns;this.element.unbind(t),this.tree.$container.unbind(t),e(n).unbind(t)},_bind:function(){var e=this,t=this.options,n=this.tree,r=n._ns;this._unbind(),n.$container.on("focusin"+r+" focusout"+r,function(e){var t=k.getNode(e),r="focusin"===e.type;t?n._callHook("nodeSetFocus",n._makeHookContext(t,e),r):n._callHook("treeSetFocus",n,r)}).on("selectstart"+r,"span.fancytree-title",function(e){e.preventDefault()}).on("keydown"+r,function(e){if(t.disabled||t.keyboard===!1)return!0;var r,i=n.focusNode,o=n._makeHookContext(i||n,e),a=n.phase;try{return n.phase="userEvent",r=i?n._triggerNodeEvent("keydown",i,e):n._triggerTreeEvent("keydown",e),"preventNav"===r?r=!0:r!==!1&&(r=n._callHook("nodeKeydown",o)),r}finally{n.phase=a}}).on("click"+r+" dblclick"+r,function(n){if(t.disabled)return!0;var r,i=k.getEventTarget(n),o=i.node,a=e.tree,s=a.phase;if(!o)return!0;r=a._makeHookContext(o,n);try{switch(a.phase="userEvent",n.type){case"click":return r.targetType=i.type,o.isPagingNode()?a._triggerNodeEvent("clickPaging",r,n)===!0:a._triggerNodeEvent("click",r,n)!==!1&&a._callHook("nodeClick",r);case"dblclick":return r.targetType=i.type,a._triggerNodeEvent("dblclick",r,n)!==!1&&a._callHook("nodeDblclick",r)}}finally{a.phase=s}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(e){return this.tree.getNodeByKey(e)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),k=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"2.21.0",buildType:"production",debugLevel:1,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:m,_FancytreeNodeClass:b,jquerySupports:{positionMyOfs:s(e.ui.version,1,9)},assert:function(e,t){return i(e,t)},debounce:function(e,t,n,r){var i;return 3===arguments.length&&"boolean"!=typeof n&&(r=n,n=!1),function(){var o=arguments;r=r||this,n&&!i&&t.apply(r,o),clearTimeout(i),i=setTimeout(function(){n||t.apply(r,o),i=null},e)}},debug:function(t){e.ui.fancytree.debugLevel>=2&&o("log",arguments)},error:function(e){o("error",arguments)},escapeHtml:p,fixPositionOptions:function(t){if((t.offset||(""+t.my+t.at).indexOf("%")>=0)&&e.error("expected new position syntax (but '%' is not supported)"),!e.ui.fancytree.jquerySupports.positionMyOfs){
var n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),r=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),i=(n[2]?+n[2]:0)+(r[2]?+r[2]:0),o=(n[4]?+n[4]:0)+(r[4]?+r[4]:0);t=e.extend({},t,{my:n[1]+" "+n[3],at:r[1]+" "+r[3]}),(i||o)&&(t.offset=""+i+" "+o)}return t},getEventTargetType:function(e){return this.getEventTarget(e).type},getEventTarget:function(t){var n=t&&t.target?t.target.className:"",i={node:this.getNode(t.target),type:r};return/\bfancytree-title\b/.test(n)?i.type="title":/\bfancytree-expander\b/.test(n)?i.type=i.node.hasChildren()===!1?"prefix":"expander":/\bfancytree-checkbox\b/.test(n)||/\bfancytree-radio\b/.test(n)?i.type="checkbox":/\bfancytree-icon\b/.test(n)?i.type="icon":/\bfancytree-node\b/.test(n)?i.type="title":t&&t.target&&e(t.target).closest(".fancytree-title").length&&(i.type="title"),i},getNode:function(e){if(e instanceof b)return e;for(e.selector!==r?e=e[0]:e.originalEvent!==r&&(e=e.target);e;){if(e.ftnode)return e.ftnode;e=e.parentNode}return null},getTree:function(t){var n;return t instanceof m?t:(t===r&&(t=0),"number"==typeof t?t=e(".fancytree-container").eq(t):"string"==typeof t?t=e(t).eq(0):t.selector!==r?t=t.eq(0):t.originalEvent!==r&&(t=e(t.target)),t=t.closest(":ui-fancytree"),n=t.data("ui-fancytree")||t.data("fancytree"),n?n.tree:null)},eventToString:function(e){var t=e.which,n=e.type,r=[];return e.altKey&&r.push("alt"),e.ctrlKey&&r.push("ctrl"),e.metaKey&&r.push("meta"),e.shiftKey&&r.push("shift"),"click"===n||"dblclick"===n?r.push(A[e.button]+n):T[t]||r.push(P[t]||String.fromCharCode(t).toLowerCase()),r.join("+")},info:function(t){e.ui.fancytree.debugLevel>=1&&o("info",arguments)},keyEventToString:function(e){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(e)},overrideMethod:function(t,n,r){var i,o=t[n]||e.noop;t[n]=function(){try{return i=this._super,this._super=o,r.apply(this,arguments)}finally{this._super=i}}},parseHtml:function(t){var n,i,o,a,s,l,d,c,u=t.find(">li"),h=[];return u.each(function(){var u,p,g=e(this),v=g.find(">span:first",this),y=v.length?null:g.find(">a:first"),b={tooltip:null,data:{}};for(v.length?b.title=v.html():y&&y.length?(b.title=y.html(),b.data.href=y.attr("href"),b.data.target=y.attr("target"),b.tooltip=y.attr("title")):(b.title=g.html(),s=b.title.search(/<ul/i),s>=0&&(b.title=b.title.substring(0,s))),b.title=e.trim(b.title),a=0,l=F.length;a<l;a++)b[F[a]]=r;for(n=this.className.split(" "),o=[],a=0,l=n.length;a<l;a++)i=n[a],L[i]?b[i]=!0:o.push(i);if(b.extraClasses=o.join(" "),d=g.attr("title"),d&&(b.tooltip=d),d=g.attr("id"),d&&(b.key=d),u=f(g),u&&!e.isEmptyObject(u)){for(p in O)u.hasOwnProperty(p)&&(u[O[p]]=u[p],delete u[p]);for(a=0,l=D.length;a<l;a++)d=D[a],c=u[d],null!=c&&(delete u[d],b[d]=c);e.extend(b.data,u)}t=g.find(">ul:first"),t.length?b.children=e.ui.fancytree.parseHtml(t):b.children=b.lazy?r:null,h.push(b)}),h},registerExtension:function(t){i(null!=t.name,"extensions must have a `name` property."),i(null!=t.version,"extensions must have a `version` property."),e.ui.fancytree._extensions[t.name]=t},unescapeHtml:function(e){var t=n.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},warn:function(e){o("warn",arguments)}})}(jQuery,window,document)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n="?"===e.substr(0,1),r=n?e.substr(1):e;if(void 0===t[r]){if(n)return;throw'Attribute "'+props[prop]+'" does not exists'}return t[r]}Object.defineProperty(t,"__esModule",{value:!0}),t.FancytreeAdapter=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(32),d=r(l);n(31),n(29),n(28),n(54),n(55);var c=new d.default;t.FancytreeAdapter=function(){function e(t){if(i(this,e),!window.jQuery||!jQuery.fn.fancytree)throw"The FancytreeAdapter requires both jQuery and the FancyTree library.";if(!t.request)throw"The FancytreeAdapter requires a request option.";this.requestData=t.request,this.rootNode=t.root_node||"/",this.useCache=void 0===t.use_cache||t.use_cache,this.boundToInput=!1,t.dnd&&void 0==t.dnd.enabled&&(t.dnd.enabled=!0);var n=function(){return!0};if(this.dndOptions=jQuery.extend({enabled:!1,isNodeDraggable:n,nodeAcceptsDraggable:n},t.dnd),this.dndOptions.enabled&&!t.request.move)throw"The move request needs to be configured when drag 'n drop is enabled, pass it using the `request.move` option.";this.dndOptions.request=t.request.move,this.actions=new Array,this.tree=null,this.$tree=null,this.pathKeyMap={}}return s(e,[{key:"bindToElement",value:function(e){var t=this;if(this.$tree)throw"Cannot bind to multiple elements.";if(!e instanceof jQuery)throw"FancytreeAdapter can only be adapted to a jQuery object.";this.$tree=e;var n=this.actions,r=function(e,t){return"object"==("undefined"==typeof e?"undefined":a(e))&&e.hasOwnProperty("data")?o(e.data,t.descriptors):"function"==typeof e?e(requestNode):"string"==typeof e?e:void 0},i=function e(i){if(0!==i.length){if("//"==i.path||"/"==i.path)return e(i.children[Object.keys(i.children)[0]]);var o=i.path.replace("/","/").replace("//","/"),a=t.pathKeyMap[o]||""+jQuery.ui.fancytree._nextNodeKey++,s={title:i.label,key:a,children:[],actions:{},refPath:o,type:i.payload_type,unselectable:!0};t.pathKeyMap[o]=a,i.descriptors.hasOwnProperty("icon")&&(s.icon=i.descriptors.icon);for(var l in n){var d=n[l],c=r(d.url,i);void 0!==c&&(s.actions[l]={label:l,iconClass:d.icon,url:c})}var u=0;for(name in i.children)if(i.children.hasOwnProperty(name)){var h=e(i.children[name]);h&&s.children.push(h),u++}return 0!=u&&(s.folder=!0,s.lazy=!0,0===s.children.length&&(s.children=null)),s}},s=this.requestData,l=this.useCache,d={source:l&&c.has(this.rootNode)?c.get(this.rootNode):s.load(this.rootNode),lazyLoad:function(e,t){var n=t.node.data.refPath;if(l&&c.has(n))t.result=c.get(n);else{var r=s.load(n);Array.isArray(r)?t.result=r:t.result=jQuery.extend({data:{}},r)}},postProcess:function(e,t){if(t.hasOwnProperty("error")&&null!=t.error)return void(t.result={error:"An error occured while retrieving the nodes: "+t.error});var n=i(t.response),r=function(e,t){return t==e.refPath};n=r(n,t.node.data.refPath)?n.children:[n],1==n.length&&void 0!==n[0].folder&&(n[0].expanded=!0),t.result=n,l&&c.set(t.node.data.refPath,n)},activeVisible:!0};this.dndOptions.enabled&&(d.extensions=["dnd"],d.dnd={dragStart:function(e,n){return t.dndOptions.isNodeDraggable(e,n)},dragEnter:function(e,n){return t.dndOptions.nodeAcceptsDraggable(e,n)},dragExpand:function(e,t){return!0},dragDrop:function(e,n){var r=e.data.refPath;"over"!=n.hitMode&&"child"!=n.hitMode&&(r=e.parent.data.refPath);var o=n.otherNode.data.refPath,a=r+"/"+o.substr(1+o.lastIndexOf("/"));n.otherNode.icon;n.otherNode.icon="fa fa-spinner fa-spin",n.otherNode.renderTitle(),t.requestData.move(o,a).done(function(t){n.otherNode.remove(),"over"!=n.hitMode&&(e=e.parent),e.addChildren(i(t))}).fail(function(t,n,r){console.error(r),e._error={message:"Failed to move the node.",details:r},e.renderStatus(),setTimeout(function(){e._error=null,e.renderStatus()},1e3)})}}),this.$tree.fancytree(d),this.actions&&this.$tree.cmfContextMenu({delegate:"span.fancytree-title",wrapperTemplate:'<ul class="dropdown-menu" style="display:block;"></ul>',actionTemplate:'<li role="presentation"><a role="menuitem" href="{{ url }}"><i class="{{ iconClass }}"></i> {{ label }}</li>',actions:function(e){return jQuery.ui.fancytree.getNode(e).data.actions}}),this.tree=this.$tree.fancytree("getTree"),this.tree.getNodeByRefPath=function(e){return this.findFirst(function(t){return t.data.refPath==e})},this.$tree.fancytree("option","activate",function(e,n){t.boundToInput||n.node.setActive(!1)})}},{key:"bindToInput",value:function(e){var t=this;this.boundToInput=!0,this.$tree.fancytree("option","activate",function(t,n){e.val(n.node.data.refPath)});var n=function(e){if(!t.pathKeyMap.hasOwnProperty(e)){for(var n=e.split("/");!t.pathKeyMap.hasOwnProperty(n.join("/"))&&n.pop(););if(0===n.length)return;var i=n.join("/"),o=e.substr(i.length+1).split("/");o.forEach(function(e){t.pathKeyMap[i+="/"+e]=""+jQuery.ui.fancytree._nextNodeKey++})}t.tree.loadKeyPath(r(e),function(e,t){"ok"==t&&(e.setExpanded(),e.setActive())})},r=function(e){var n="",r="",i=e.split("/");return i.forEach(function(e){""!=e&&t.pathKeyMap.hasOwnProperty(r+="/"+e)&&(n+="/"+t.pathKeyMap[r])}),n};this.$tree.bind("fancytreeinit",function(t,r){n(e.val())}),e.on("change",function(e){n($(this).val())})}},{key:"addAction",value:function(e,t,n){this.actions[e]={url:t,icon:n}}}],[{key:"_resetCache",value:function(){c.clear()}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(27),o=r(i);o.default.fn.cmfContextMenu=function(e){var t,e=o.default.extend({delegate:null,actions:[],select:function(e,t){},wrapperTemplate:'<ul id="cmf-context-menu"></ul>',actionTemplate:'<li><i class="{{ iconClass }}"></i> {{ label }}</li>'},e),n=(0,o.default)("body");(0,o.default)(this).on("contextmenu",e.delegate,function(r){r.preventDefault();var i=(0,o.default)(this);t&&t.remove();var a=e.actions;if("function"==typeof a&&(a=a(i)),!1!==a&&!o.default.isEmptyObject(a)){t=function(){var t=(0,o.default)(e.wrapperTemplate),n=t.is("ul")?t:t.find("ul");for(var r in a){var i=a[r],s=(0,o.default)(function(){var t=e.actionTemplate;for(var n in i)i.hasOwnProperty(n)&&(t=t.replace("{{ "+n+" }}",i[n]));return t}());s.data("cmd",r),n.append(s)}return t}(),t.css({top:r.pageY,left:r.pageX}),n.append(t);var s=e.select;t.on("click","li",function(e){e.stopPropagation(),s(i,e)})}}),(0,o.default)("html").on("click",function(e){t&&t.remove()})}},function(e,t,n){n(51),n(52),n(53),n(50),e.exports=n(7).Map},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(1)("unscopables"),i=Array.prototype;void 0==i[r]&&n(3)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";var r=n(4),i=n(3),o=n(24),a=n(8),s=n(25),l=n(9),d=n(21),c=n(13),u=n(22),h=n(15)("id"),f=n(11),p=n(12),g=n(43),v=n(10),y=Object.isExtensible||p,b=v?"_s":"size",m=0,x=function(e,t){if(!p(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!f(e,h)){if(!y(e))return"F";if(!t)return"E";i(e,h,++m)}return"O"+e[h]},_=function(e,t){var n,r=x(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,i){var c=e(function(e,o){s(e,c,t),e._i=r.create(null),e._f=void 0,e._l=void 0,e[b]=0,void 0!=o&&d(o,n,e[i],e)});return o(c.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[b]=0},delete:function(e){var t=this,n=_(t,e);if(n){var r=n.n,i=n.p;delete t._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),t._f==n&&(t._f=r),t._l==n&&(t._l=i),t[b]--}return!!n},forEach:function(e){for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!_(this,e)}}),v&&r.setDesc(c.prototype,"size",{get:function(){return l(this[b])}}),c},def:function(e,t,n){var r,i,o=_(e,t);return o?o.v=n:(e._l=o={i:i=x(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[b]++,"F"!==i&&(e._i[i]=o)),e},getEntry:_,setStrong:function(e,t,n){c(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?u(0,n.k):"values"==t?u(0,n.v):u(0,[n.k,n.v]):(e._t=void 0,u(1))},n?"entries":"values",!n,!0),g(t)}}},function(e,t,n){"use strict";var r=n(2),i=n(19),o=n(6),a=n(24),s=n(21),l=n(25),d=n(12),c=n(20),u=n(41),h=n(14);e.exports=function(e,t,n,f,p,g){var v=r[e],y=v,b=p?"set":"add",m=y&&y.prototype,x={},_=function(e){var t=m[e];o(m,e,"delete"==e?function(e){return!(g&&!d(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!d(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(g||m.forEach&&!c(function(){(new y).entries().next()}))){var k,N=new y,w=N[b](g?{}:-0,1)!=N,C=c(function(){N.has(1)}),S=u(function(e){new y(e)});S||(y=t(function(t,n){l(t,y,e);var r=new v;return void 0!=n&&s(n,p,r[b],r),r}),y.prototype=m,m.constructor=y),g||N.forEach(function(e,t){k=1/t===-(1/0)}),(C||k)&&(_("delete"),_("has"),p&&_("get")),(k||w)&&_(b),g&&m.clear&&delete m.clear}else y=f.getConstructor(t,e,p,b),a(y.prototype,n);return h(y,e),x[e]=y,i(i.G+i.W+i.F*(y!=v),x),g||f.setStrong(y,e,p),y}},function(e,t,n){var r=n(18);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(5),i=n(1)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(16);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){"use strict";var r=n(4),i=n(23),o=n(14),a={};n(3)(a,n(1)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r.create(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(1)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r=n(2),i=n(4),o=n(10),a=n(1)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.setDesc(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(2),i="__core-js_shared__",o=r[i]||(r[i]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t,n){var r=n(26),i=n(9);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),d=s.length;return l<0||l>=d?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===d||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):(o-55296<<10)+(a-56320)+65536)}}},function(e,t,n){var r=n(37),i=n(9);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(26),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(17),i=n(1)("iterator"),o=n(5);e.exports=n(7).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){"use strict";var r=n(34),i=n(22),o=n(5),a=n(46);e.exports=n(13)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r=n(35);n(36)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(17),i={};i[n(1)("toStringTag")]="z",i+""!="[object z]"&&n(6)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){"use strict";var r=n(45)(!0);n(13)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){n(49);var r=n(2),i=n(3),o=n(5),a=n(1)("iterator"),s=r.NodeList,l=r.HTMLCollection,d=s&&s.prototype,c=l&&l.prototype,u=o.NodeList=o.HTMLCollection=o.Array;d&&!d[a]&&i(d,a,u),c&&!c[a]&&i(c,a,u)},function(e,t){},function(e,t){}]);